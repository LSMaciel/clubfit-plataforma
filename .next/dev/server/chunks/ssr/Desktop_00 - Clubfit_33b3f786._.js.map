{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/carolina/Desktop/00%20-%20Clubfit/utils/supabase/server.ts"],"sourcesContent":["\nimport { createServerClient } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\n\nexport async function createClient() {\n  const cookieStore = await cookies()\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        get(name: string) {\n          return cookieStore.get(name)?.value\n        },\n        set(name: string, value: string, options: any) {\n          try {\n            cookieStore.set({ name, value, ...options })\n          } catch (error) {\n            // The `set` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n        remove(name: string, options: any) {\n          try {\n            cookieStore.set({ name, value: '', ...options })\n          } catch (error) {\n            // The `delete` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    }\n  )\n}\n"],"names":[],"mappings":";;;;AACA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0KAAO;IAEjC,OAAO,IAAA,+NAAkB,sUAGvB;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAY;gBAC3C,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM;wBAAO,GAAG,OAAO;oBAAC;gBAC5C,EAAE,OAAO,OAAO;gBACd,uDAAuD;gBACvD,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;YACA,QAAO,IAAY,EAAE,OAAY;gBAC/B,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM,OAAO;wBAAI,GAAG,OAAO;oBAAC;gBAChD,EAAE,OAAO,OAAO;gBACd,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/carolina/Desktop/00%20-%20Clubfit/app/auth/actions.ts"],"sourcesContent":["\n'use server'\n\nimport { createClient } from '@/utils/supabase/server'\nimport { redirect } from 'next/navigation'\n\nexport async function signIn(formData: FormData) {\n  const email = formData.get('email') as string\n  const password = formData.get('password') as string\n  const supabase = await createClient()\n\n  // 1. Tentar Login no Supabase Auth\n  const { error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  })\n\n  if (error) {\n    return redirect('/admin/login?message=Credenciais inv치lidas.')\n  }\n\n  // 2. Verificar Role na tabela public.users (Regra de Neg칩cio)\n  const { data: userData, error: userError } = await supabase\n    .from('users')\n    .select('role')\n    .single() // O RLS garante que ele s칩 busca o pr칩prio user\n\n  if (userError || !userData) {\n    await supabase.auth.signOut()\n    return redirect('/admin/login?message=Erro ao verificar cadastro.')\n  }\n\n  // 3. Bloquear Alunos no painel Admin\n  if (userData.role === 'STUDENT') {\n    await supabase.auth.signOut()\n    return redirect('/admin/login?message=Acesso restrito a administradores.')\n  }\n\n  // 4. Sucesso\n  return redirect('/admin/dashboard')\n}\n\nexport async function signOut() {\n  const supabase = await createClient()\n  await supabase.auth.signOut()\n  return redirect('/admin/login')\n}\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;AAAA;;;;;AAEO,eAAe,OAAO,QAAkB;IAC7C,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,WAAW,SAAS,GAAG,CAAC;IAC9B,MAAM,WAAW,MAAM,IAAA,2KAAY;IAEnC,mCAAmC;IACnC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;QACvD;QACA;IACF;IAEA,IAAI,OAAO;QACT,OAAO,IAAA,iOAAQ,EAAC;IAClB;IAEA,8DAA8D;IAC9D,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SAChD,IAAI,CAAC,SACL,MAAM,CAAC,QACP,MAAM,GAAG,gDAAgD;;IAE5D,IAAI,aAAa,CAAC,UAAU;QAC1B,MAAM,SAAS,IAAI,CAAC,OAAO;QAC3B,OAAO,IAAA,iOAAQ,EAAC;IAClB;IAEA,qCAAqC;IACrC,IAAI,SAAS,IAAI,KAAK,WAAW;QAC/B,MAAM,SAAS,IAAI,CAAC,OAAO;QAC3B,OAAO,IAAA,iOAAQ,EAAC;IAClB;IAEA,aAAa;IACb,OAAO,IAAA,iOAAQ,EAAC;AAClB;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,IAAA,2KAAY;IACnC,MAAM,SAAS,IAAI,CAAC,OAAO;IAC3B,OAAO,IAAA,iOAAQ,EAAC;AAClB;;;IAxCsB;IAoCA;;AApCA,+QAAA;AAoCA,+QAAA"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/carolina/Desktop/00%20-%20Clubfit/components/admin/admin-context-switcher.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminContextSwitcher = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminContextSwitcher() from the server but AdminContextSwitcher is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/00 - Clubfit/components/admin/admin-context-switcher.tsx <module evaluation>\",\n    \"AdminContextSwitcher\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,uBAAuB,IAAA,wSAAuB,EACvD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,kGACA","ignoreList":[0]}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/carolina/Desktop/00%20-%20Clubfit/components/admin/admin-context-switcher.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminContextSwitcher = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminContextSwitcher() from the server but AdminContextSwitcher is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/00 - Clubfit/components/admin/admin-context-switcher.tsx\",\n    \"AdminContextSwitcher\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,uBAAuB,IAAA,wSAAuB,EACvD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,8EACA","ignoreList":[0]}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/carolina/Desktop/00%20-%20Clubfit/components/admin/admin-header.tsx"],"sourcesContent":["import Link from 'next/link'\r\nimport { createClient } from '@/utils/supabase/server'\r\nimport { signOut } from '@/app/auth/actions'\r\nimport { cookies } from 'next/headers'\r\nimport { AdminContextSwitcher } from './admin-context-switcher'\r\n\r\nexport async function AdminHeader() {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    // Get full profile\r\n    const { data: profile } = await supabase\r\n        .from('users')\r\n        .select('*')\r\n        .eq('id', user?.id)\r\n        .single()\r\n\r\n    const isSuperAdmin = profile?.role === 'SUPER_ADMIN'\r\n\r\n    // Logic for Context Switcher (Super Admin only)\r\n    let academies: any[] = []\r\n    let currentContextId: string | null = null\r\n\r\n    if (isSuperAdmin) {\r\n        const { data: allAcademies } = await supabase\r\n            .from('academies')\r\n            .select('id, name')\r\n            .order('name')\r\n\r\n        academies = allAcademies || []\r\n\r\n        const cookieStore = await cookies()\r\n        currentContextId = cookieStore.get('admin-context-academy-id')?.value || null\r\n    }\r\n\r\n    // Determine Display Title based on Context\r\n    let contextTitle = \"ClubFit Admin\"\r\n    let contextColorClass = \"text-slate-900\" // Default Dark\r\n\r\n    if (currentContextId) {\r\n        const activeAcademy = academies.find(a => a.id === currentContextId)\r\n        if (activeAcademy) {\r\n            contextTitle = `${activeAcademy.name} (Modo Admin)`\r\n            contextColorClass = \"text-amber-700\" // Warning/Attention color\r\n        }\r\n    }\r\n\r\n    return (\r\n        <nav className=\"bg-white border-b border-slate-200 px-8 py-4 flex justify-between items-center sticky top-0 z-50\">\r\n            <div className=\"flex items-center gap-6\">\r\n                <Link href=\"/admin/dashboard\" className={`font-bold text-xl ${contextColorClass}`}>\r\n                    {contextTitle}\r\n                </Link>\r\n\r\n                {isSuperAdmin && (\r\n                    <div className=\"pl-6 border-l border-slate-200\">\r\n                        <AdminContextSwitcher\r\n                            academies={academies}\r\n                            currentContextId={currentContextId}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-4\">\r\n                <div className=\"text-sm text-right hidden sm:block\">\r\n                    <p className=\"font-medium\">{profile?.name || user?.email}</p>\r\n                    <p className=\"text-xs text-slate-500 uppercase\">{profile?.role?.replace('_', ' ')}</p>\r\n                </div>\r\n                <form action={signOut}>\r\n                    <button className=\"text-sm text-red-600 hover:text-red-800 font-medium px-3 py-1 border border-transparent hover:border-red-100 rounded-md transition-colors\">\r\n                        Sair\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAEO,eAAe;IAClB,MAAM,WAAW,MAAM,IAAA,2KAAY;IACnC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAEtD,mBAAmB;IACnB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,MAAM,IACf,MAAM;IAEX,MAAM,eAAe,SAAS,SAAS;IAEvC,gDAAgD;IAChD,IAAI,YAAmB,EAAE;IACzB,IAAI,mBAAkC;IAEtC,IAAI,cAAc;QACd,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAChC,IAAI,CAAC,aACL,MAAM,CAAC,YACP,KAAK,CAAC;QAEX,YAAY,gBAAgB,EAAE;QAE9B,MAAM,cAAc,MAAM,IAAA,0KAAO;QACjC,mBAAmB,YAAY,GAAG,CAAC,6BAA6B,SAAS;IAC7E;IAEA,2CAA2C;IAC3C,IAAI,eAAe;IACnB,IAAI,oBAAoB,iBAAiB,eAAe;;IAExD,IAAI,kBAAkB;QAClB,MAAM,gBAAgB,UAAU,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACnD,IAAI,eAAe;YACf,eAAe,GAAG,cAAc,IAAI,CAAC,aAAa,CAAC;YACnD,oBAAoB,kBAAiB,0BAA0B;QACnE;IACJ;IAEA,qBACI,8QAAC;QAAI,WAAU;;0BACX,8QAAC;gBAAI,WAAU;;kCACX,8QAAC,0NAAI;wBAAC,MAAK;wBAAmB,WAAW,CAAC,kBAAkB,EAAE,mBAAmB;kCAC5E;;;;;;oBAGJ,8BACG,8QAAC;wBAAI,WAAU;kCACX,cAAA,8QAAC,4MAAoB;4BACjB,WAAW;4BACX,kBAAkB;;;;;;;;;;;;;;;;;0BAMlC,8QAAC;gBAAI,WAAU;;kCACX,8QAAC;wBAAI,WAAU;;0CACX,8QAAC;gCAAE,WAAU;0CAAe,SAAS,QAAQ,MAAM;;;;;;0CACnD,8QAAC;gCAAE,WAAU;0CAAoC,SAAS,MAAM,QAAQ,KAAK;;;;;;;;;;;;kCAEjF,8QAAC;wBAAK,QAAQ,iKAAO;kCACjB,cAAA,8QAAC;4BAAO,WAAU;sCAA4I;;;;;;;;;;;;;;;;;;;;;;;AAOlL"}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/carolina/Desktop/00%20-%20Clubfit/app/admin/layout.tsx"],"sourcesContent":["import { AdminHeader } from '@/components/admin/admin-header'\r\n\r\nexport default function AdminLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode\r\n}) {\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-50 flex flex-col\">\r\n            {/* Top Navigation Bar with Context Switcher */}\r\n            <AdminHeader />\r\n\r\n            {/* Main Content Area */}\r\n            <div className=\"flex-1 w-full\">\r\n                {children}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEe,SAAS,YAAY,EAChC,QAAQ,EAGX;IACG,qBACI,8QAAC;QAAI,WAAU;;0BAEX,8QAAC,sLAAW;;;;;0BAGZ,8QAAC;gBAAI,WAAU;0BACV;;;;;;;;;;;;AAIjB"}}]
}