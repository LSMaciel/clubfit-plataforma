(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{5276:(e,t,s)=>{Promise.resolve().then(s.bind(s,8403))},8403:(e,t,s)=>{"use strict";s.d(t,{BenefitCard:()=>o});var l=s(5155),a=s(2115),r=s(9339);let n=(0,r.createServerReference)("40f4c45e0f239257f0261baba9fc77a6f0e9ef504f",r.callServer,void 0,r.findSourceMapURL,"generateToken");var i=s(9549);function d({isOpen:e,onClose:t,token:s,expiresAt:r,title:n,primaryColor:d}){let[o,c]=(0,a.useState)(""),[x,h]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(!e||!r)return;let t=setInterval(()=>{let e=new Date().getTime(),s=new Date(r).getTime()-e;if(s<0)clearInterval(t),h(!0),c("00:00");else{let e=Math.floor(s%36e5/6e4),t=Math.floor(s%6e4/1e3);c(`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`)}},1e3);return()=>clearInterval(t)},[e,r]),e)?(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm animate-in fade-in duration-200",children:(0,l.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-200 relative",children:[(0,l.jsxs)("div",{className:"p-6 text-center text-white relative",style:{backgroundColor:d},children:[(0,l.jsx)("h3",{className:"text-lg font-bold leading-tight",children:n}),(0,l.jsx)("p",{className:"text-xs opacity-90 mt-1",children:"Apresente este c\xf3digo ao parceiro"}),(0,l.jsx)("button",{onClick:t,className:"absolute top-4 right-4 text-white/80 hover:text-white",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M18 6 6 18"}),(0,l.jsx)("path",{d:"m6 6 12 12"})]})})]}),(0,l.jsxs)("div",{className:"p-8 flex flex-col items-center",children:[x?(0,l.jsxs)("div",{className:"h-64 w-64 flex flex-col items-center justify-center bg-slate-50 rounded-xl border-2 border-dashed border-slate-300",children:[(0,l.jsx)("span",{className:"text-4xl mb-2",children:"â³"}),(0,l.jsx)("p",{className:"text-slate-500 font-bold",children:"Voucher Expirado"}),(0,l.jsx)("p",{className:"text-xs text-slate-400 text-center px-4 mt-1",children:"Feche e gere um novo c\xf3digo se ainda estiver no estabelecimento."})]}):(0,l.jsx)("div",{className:"bg-white p-2 rounded-xl border border-slate-100 shadow-inner",children:(0,l.jsx)(i.Ay,{value:s,size:200,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),(0,l.jsxs)("div",{className:"mt-6 text-center",children:[(0,l.jsx)("p",{className:"text-xs text-slate-400 uppercase tracking-widest font-semibold mb-1",children:"C\xf3digo do Voucher"}),(0,l.jsx)("p",{className:"text-2xl font-mono font-bold text-slate-800 tracking-wider",children:s.substring(0,8).toUpperCase()})]}),!x&&(0,l.jsxs)("div",{className:"mt-6 flex items-center gap-2 px-4 py-2 bg-slate-50 rounded-full border border-slate-200",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-slate-700 font-mono",children:["V\xe1lido por ",o]})]})]}),(0,l.jsx)("div",{className:"p-4 border-t border-slate-100 bg-slate-50 text-center",children:(0,l.jsx)("button",{onClick:t,className:"text-sm font-medium text-slate-500 hover:text-slate-800",children:"Fechar"})})]})}):null}function o({id:e,title:t,rules:s,partnerName:r,partnerAddress:i,validityEnd:o,primaryColor:c}){let[x,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(!1),[u,f]=(0,a.useState)(null);async function b(){h(!0);let t=await n(e);(h(!1),t.error)?alert(t.error):t.token&&t.expiresAt&&(f({token:t.token,expiresAt:t.expiresAt}),p(!0))}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden flex flex-col h-full active:scale-[0.99] transition-transform duration-100",children:[(0,l.jsx)("div",{className:"p-4 pb-2 flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-xs font-bold text-slate-500",children:r.substring(0,2).toUpperCase()}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-bold text-slate-800 leading-tight",children:r}),i&&(0,l.jsx)("p",{className:"text-[10px] text-slate-400 truncate max-w-[150px]",children:i})]})]})}),(0,l.jsxs)("div",{className:"px-4 py-2 flex-1",children:[(0,l.jsx)("h3",{className:"text-xl font-extrabold text-slate-900 leading-tight mb-2",children:t}),(0,l.jsx)("p",{className:"text-xs text-slate-500 line-clamp-2",children:s||"Consulte regras no estabelecimento."})]}),(0,l.jsxs)("div",{className:"p-4 pt-2 mt-auto",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-3",children:o?(0,l.jsxs)("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-2 py-0.5 rounded",children:["V\xe1lido at\xe9 ",new Date(o).toLocaleDateString("pt-BR")]}):(0,l.jsx)("span",{className:"text-[10px] bg-green-50 text-green-600 px-2 py-0.5 rounded",children:"Validade Indeterminada"})}),(0,l.jsx)("button",{onClick:b,disabled:x,className:"w-full py-3 rounded-xl font-bold text-white shadow-md text-sm flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",style:{backgroundColor:c},children:x?(0,l.jsx)("span",{className:"animate-pulse",children:"Gerando..."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),(0,l.jsx)("path",{d:"M7 7h.01"}),(0,l.jsx)("path",{d:"M17 7h.01"}),(0,l.jsx)("path",{d:"M7 17h.01"}),(0,l.jsx)("path",{d:"M17 17h.01"})]}),"Gerar Voucher"]})})]})]}),m&&u&&(0,l.jsx)(d,{isOpen:m,onClose:()=>p(!1),token:u.token,expiresAt:u.expiresAt,title:t,primaryColor:c})]})}}},e=>{e.O(0,[927,441,928,358],()=>e(e.s=5276)),_N_E=e.O()}]);