(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[877],{3073:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>m});var s=r(5155),t=r(9339);let l=(0,t.createServerReference)("60cb9882db31338ef9c6de879eefd69067c32c1a26",t.callServer,void 0,t.findSourceMapURL,"createPartner");var o=r(6887),d=r(6378),n=r(8500),i=r.n(n),c=r(2115);function m(){let[e,a]=(0,c.useState)(null);async function r(e){a(null);let r=await l(null,e);r?.error&&a(r.error)}return(0,s.jsx)("main",{className:"flex-1 p-8",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Novo Parceiro"}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8",children:(0,s.jsxs)("form",{action:r,className:"space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-800 mb-4 border-b pb-2",children:"Dados do Estabelecimento"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,s.jsx)(o.Z,{label:"Nome Fantasia",name:"partner_name",placeholder:"Ex: Pizzaria do Z\xe9",required:!0}),(0,s.jsx)(d.X,{}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-1",children:"Descri\xe7\xe3o Curta (Categoria)"}),(0,s.jsx)("textarea",{id:"description",name:"description",rows:3,className:"block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm border p-2",placeholder:"Ex: Pizzaria artesanal com desconto para alunos."})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-800 mb-4 border-b pb-2",children:"Acesso do Respons\xe1vel (Dono)"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(o.Z,{label:"Nome do Respons\xe1vel",name:"owner_name",placeholder:"Nome Completo",required:!0}),(0,s.jsx)("div",{className:"hidden md:block"})," ",(0,s.jsx)(o.Z,{label:"E-mail de Login",name:"owner_email",type:"email",placeholder:"admin@pizzaria.com",required:!0}),(0,s.jsx)(o.Z,{label:"Senha Inicial",name:"owner_password",type:"text",placeholder:"M\xednimo 6 caracteres",required:!0,minLength:6})]}),(0,s.jsx)("p",{className:"mt-2 text-xs text-slate-500 bg-blue-50 p-2 rounded text-center",children:"ℹ️ Guarde esta senha. O parceiro usar\xe1 este e-mail e senha para acessar o painel de promo\xe7\xf5es."})]}),e&&(0,s.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-md text-sm border border-red-100",children:e}),(0,s.jsxs)("div",{className:"pt-4 flex justify-end gap-3",children:[(0,s.jsx)(i(),{href:"/admin/partners",className:"px-4 py-2 border border-slate-300 rounded-md text-slate-700 hover:bg-slate-50 text-sm font-medium",children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-slate-900 text-white rounded-md hover:bg-slate-800 text-sm font-medium",children:"Cadastrar Parceiro"})]})]})})]})})}},6378:(e,a,r)=>{"use strict";r.d(a,{X:()=>o});var s=r(5155),t=r(2115),l=r(6887);function o(){let[e,a]=(0,t.useState)(!1),[r,o]=(0,t.useState)({street:"",neighborhood:"",city:"",state:""}),[d,n]=(0,t.useState)(""),[i,c]=(0,t.useState)(null),m=(0,t.useRef)(null),u=async e=>{let a=e.target.value.replace(/\D/g,"");if(a.length>5&&(a=a.replace(/^(\d{5})(\d)/,"$1-$2")),n(a),9===a.length){let e=a.replace("-","");await x(e)}},x=async e=>{a(!0);try{let a=await fetch(`https://brasilapi.com.br/api/cep/v2/${e}`);if(!a.ok)throw Error("CEP n\xe3o encontrado");let r=await a.json(),s={street:r.street,neighborhood:r.neighborhood,city:r.city,state:r.state};o(s),r.location?.coordinates&&c({lat:r.location.coordinates.latitude,lng:r.location.coordinates.longitude}),setTimeout(()=>{m.current?.focus()},100)}catch(e){console.error("Erro ao buscar CEP:",e)}finally{a(!1)}},h=(e,a)=>{o(r=>({...r,[e]:a}))};return(0,s.jsxs)("div",{className:"space-y-4 border-t pt-4 mt-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-slate-900",children:"Endere\xe7o"}),(0,s.jsx)("input",{type:"hidden",name:"latitude",value:i?.lat||""}),(0,s.jsx)("input",{type:"hidden",name:"longitude",value:i?.lng||""}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-1 relative",children:[(0,s.jsx)(l.Z,{label:"CEP",name:"zip_code",placeholder:"00000-000",maxLength:9,value:d,onChange:u}),e&&(0,s.jsx)("span",{className:"absolute right-3 top-9 text-xs text-indigo-600 font-bold",children:"Busca..."})]}),(0,s.jsx)("div",{className:"md:col-span-1",children:(0,s.jsx)(l.Z,{label:"Estado (UF)",name:"state",maxLength:2,value:r.state,onChange:e=>h("state",e.target.value)})}),(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(l.Z,{label:"Cidade",name:"city",value:r.city,onChange:e=>h("city",e.target.value)})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"md:col-span-3",children:(0,s.jsx)(l.Z,{label:"Logradouro (Rua, Av...)",name:"street",value:r.street,onChange:e=>h("street",e.target.value)})}),(0,s.jsx)("div",{className:"md:col-span-1",children:(0,s.jsx)(l.Z,{ref:m,label:"N\xfamero",name:"number",placeholder:"123"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(l.Z,{label:"Bairro",name:"neighborhood",value:r.neighborhood,onChange:e=>h("neighborhood",e.target.value)}),(0,s.jsx)(l.Z,{label:"Complemento",name:"complement",placeholder:"Ex: Apto 101"})]})]})}},6860:(e,a,r)=>{Promise.resolve().then(r.bind(r,3073))},6887:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});var s=r(5155);let t=(0,r(2115).forwardRef)(({label:e,name:a,error:r,className:t="",...l},o)=>(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:a,className:"block text-sm font-medium text-slate-700 mb-1",children:e}),(0,s.jsx)("input",{id:a,name:a,ref:o,className:`
            block w-full rounded-md border-slate-300 shadow-sm 
            focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm
            border p-2
            ${r?"border-red-500 focus:border-red-500 focus:ring-red-500":""}
            ${t}
          `,...l}),r&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r})]}));t.displayName="FormInput"},9339:(e,a,r)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={callServer:function(){return l.callServer},createServerReference:function(){return d.createServerReference},findSourceMapURL:function(){return o.findSourceMapURL}};for(var t in s)Object.defineProperty(a,t,{enumerable:!0,get:s[t]});let l=r(7304),o=r(4060),d=r(7197)}},e=>{e.O(0,[500,441,928,358],()=>e(e.s=6860)),_N_E=e.O()}]);